import{E as le,r as x,l as Nt,A as Vi,G as We,c as O,o as T,a as L,d as Ke,q as de,F as Rt,v as At,H as pt,B as ii,x as Tt,t as we,T as mn,I as yn,u as Me,J as Sn,K as Ne,j as Y,L as gt,k as Bt,M as Gi,p as vn,n as Cn,N as mt,O as bn,s as wn,P as Pn,b as kn,Q as In,R as Rn,D as An}from"./runtime-dom.esm-bundler-DTC5U9Ik.js";const Tn=[{text:"Detection by Upload",path:"/prediction"},{text:"Detection by Picture",path:"/takePicture"},{text:"Detection History",path:"/history"}],On=le({name:"Navbar",setup(){const i=x(!1),e=x(!1),t=()=>{i.value=!i.value},n=()=>{e.value=window.innerWidth<600};return Nt(()=>{n(),window.addEventListener("resize",n)}),Vi(()=>{window.removeEventListener("resize",n)}),{drawerOpen:i,isMobile:e,toggleDrawer:t,navItems:Tn}}}),Ie=(i,e)=>{const t=i.__vccOpts||i;for(const[n,s]of e)t[n]=s;return t},Dn={class:"gradient-app-bar"},xn={class:"toolbar"},En={key:0,class:"nav-links"},Mn={key:0,class:"drawer"},Ln={class:"drawer-content"};function Fn(i,e,t,n,s,r){const a=We("router-link");return T(),O("header",Dn,[L("div",xn,[L("button",{class:"menu-icon",onClick:e[0]||(e[0]=(...o)=>i.toggleDrawer&&i.toggleDrawer(...o))},"☰"),e[1]||(e[1]=L("h1",{class:"title"},"Asten Vuesion",-1)),i.isMobile?de("",!0):(T(),O("nav",En,[(T(!0),O(Rt,null,At(i.navItems,o=>(T(),ii(a,{key:o.text,to:o.path,class:"nav-button"},{default:pt(()=>[Tt(we(o.text),1)]),_:2},1032,["to"]))),128))]))]),Ke(mn,{name:"drawer-transition"},{default:pt(()=>[i.drawerOpen?(T(),O("div",Mn,[L("div",Ln,[(T(!0),O(Rt,null,At(i.navItems,o=>(T(),ii(a,{key:o.text,to:o.path,class:"drawer-link",onClick:i.toggleDrawer},{default:pt(()=>[Tt(we(o.text),1)]),_:2},1032,["to","onClick"]))),128))])])):de("",!0)]),_:1})])}const Un=Ie(On,[["render",Fn],["__scopeId","data-v-10727453"]]),Nn=le({name:"Footer",setup(){return{currentYear:new Date().getFullYear()}}}),Bn={class:"glass-footer"};function Vn(i,e,t,n,s,r){return T(),O("footer",Bn," © "+we(i.currentYear)+" Asten Vuesion. Todos os direitos reservados. ",1)}const Gn=Ie(Nn,[["render",Vn],["__scopeId","data-v-66f5572b"]]),_n=le({name:"App",components:{Navbar:Un,Footer:Gn}}),jn={id:"app"},Hn={class:"main-container"};function zn(i,e,t,n,s,r){const a=We("Navbar"),o=We("router-view"),l=We("Footer");return T(),O("div",jn,[Ke(a),L("div",Hn,[Ke(o)]),Ke(l)])}const $n=Ie(_n,[["render",zn]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ce=typeof document<"u";function _i(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function Wn(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&_i(i.default)}const A=Object.assign;function yt(i,e){const t={};for(const n in e){const s=e[n];t[n]=X(s)?s.map(i):i(s)}return t}const Le=()=>{},X=Array.isArray,ji=/#/g,Kn=/&/g,Xn=/\//g,qn=/=/g,Yn=/\?/g,Hi=/\+/g,Jn=/%5B/g,Qn=/%5D/g,zi=/%5E/g,Zn=/%60/g,$i=/%7B/g,es=/%7C/g,Wi=/%7D/g,ts=/%20/g;function Vt(i){return encodeURI(""+i).replace(es,"|").replace(Jn,"[").replace(Qn,"]")}function is(i){return Vt(i).replace($i,"{").replace(Wi,"}").replace(zi,"^")}function Ot(i){return Vt(i).replace(Hi,"%2B").replace(ts,"+").replace(ji,"%23").replace(Kn,"%26").replace(Zn,"`").replace($i,"{").replace(Wi,"}").replace(zi,"^")}function ns(i){return Ot(i).replace(qn,"%3D")}function ss(i){return Vt(i).replace(ji,"%23").replace(Yn,"%3F")}function rs(i){return i==null?"":ss(i).replace(Xn,"%2F")}function Be(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const as=/\/$/,os=i=>i.replace(as,"");function St(i,e,t="/"){let n,s={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),s=i(r)),o>-1&&(n=n||e.slice(0,o),a=e.slice(o,e.length)),n=hs(n??e,t),{fullPath:n+(r&&"?")+r+a,path:n,query:s,hash:Be(a)}}function ls(i,e){const t=e.query?i(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ni(i,e){return!e||!i.toLowerCase().startsWith(e.toLowerCase())?i:i.slice(e.length)||"/"}function cs(i,e,t){const n=e.matched.length-1,s=t.matched.length-1;return n>-1&&n===s&&Pe(e.matched[n],t.matched[s])&&Ki(e.params,t.params)&&i(e.query)===i(t.query)&&e.hash===t.hash}function Pe(i,e){return(i.aliasOf||i)===(e.aliasOf||e)}function Ki(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(!us(i[t],e[t]))return!1;return!0}function us(i,e){return X(i)?si(i,e):X(e)?si(e,i):i===e}function si(i,e){return X(e)?i.length===e.length&&i.every((t,n)=>t===e[n]):i.length===1&&i[0]===e}function hs(i,e){if(i.startsWith("/"))return i;if(!i)return e;const t=e.split("/"),n=i.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let r=t.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const te={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ve;(function(i){i.pop="pop",i.push="push"})(Ve||(Ve={}));var Fe;(function(i){i.back="back",i.forward="forward",i.unknown=""})(Fe||(Fe={}));function fs(i){if(!i)if(Ce){const e=document.querySelector("base");i=e&&e.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),os(i)}const ds=/^[^#]+#/;function ps(i,e){return i.replace(ds,"#")+e}function gs(i,e){const t=document.documentElement.getBoundingClientRect(),n=i.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const et=()=>({left:window.scrollX,top:window.scrollY});function ms(i){let e;if("el"in i){const t=i.el,n=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=gs(s,i)}else e=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ri(i,e){return(history.state?history.state.position-e:-1)+i}const Dt=new Map;function ys(i,e){Dt.set(i,e)}function Ss(i){const e=Dt.get(i);return Dt.delete(i),e}let vs=()=>location.protocol+"//"+location.host;function Xi(i,e){const{pathname:t,search:n,hash:s}=e,r=i.indexOf("#");if(r>-1){let o=s.includes(i.slice(r))?i.slice(r).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),ni(l,"")}return ni(t,i)+n+s}function Cs(i,e,t,n){let s=[],r=[],a=null;const o=({state:h})=>{const p=Xi(i,location),w=t.value,P=e.value;let S=0;if(h){if(t.value=p,e.value=h,a&&a===w){a=null;return}S=P?h.position-P.position:0}else n(p);s.forEach(m=>{m(t.value,w,{delta:S,type:Ve.pop,direction:S?S>0?Fe.forward:Fe.back:Fe.unknown})})};function l(){a=t.value}function u(h){s.push(h);const p=()=>{const w=s.indexOf(h);w>-1&&s.splice(w,1)};return r.push(p),p}function f(){const{history:h}=window;h.state&&h.replaceState(A({},h.state,{scroll:et()}),"")}function c(){for(const h of r)h();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:u,destroy:c}}function ai(i,e,t,n=!1,s=!1){return{back:i,current:e,forward:t,replaced:n,position:window.history.length,scroll:s?et():null}}function bs(i){const{history:e,location:t}=window,n={value:Xi(i,t)},s={value:e.state};s.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,f){const c=i.indexOf("#"),h=c>-1?(t.host&&document.querySelector("base")?i:i.slice(c))+l:vs()+i+l;try{e[f?"replaceState":"pushState"](u,"",h),s.value=u}catch(p){console.error(p),t[f?"replace":"assign"](h)}}function a(l,u){const f=A({},e.state,ai(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});r(l,f,!0),n.value=l}function o(l,u){const f=A({},s.value,e.state,{forward:l,scroll:et()});r(f.current,f,!0);const c=A({},ai(n.value,l,null),{position:f.position+1},u);r(l,c,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function ws(i){i=fs(i);const e=bs(i),t=Cs(i,e.state,e.location,e.replace);function n(r,a=!0){a||t.pauseListeners(),history.go(r)}const s=A({location:"",base:i,go:n,createHref:ps.bind(null,i)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Ps(i){return typeof i=="string"||i&&typeof i=="object"}function qi(i){return typeof i=="string"||typeof i=="symbol"}const Yi=Symbol("");var oi;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(oi||(oi={}));function ke(i,e){return A(new Error,{type:i,[Yi]:!0},e)}function Z(i,e){return i instanceof Error&&Yi in i&&(e==null||!!(i.type&e))}const li="[^/]+?",ks={sensitive:!1,strict:!1,start:!0,end:!0},Is=/[.+*?^${}()[\]/\\]/g;function Rs(i,e){const t=A({},ks,e),n=[];let s=t.start?"^":"";const r=[];for(const u of i){const f=u.length?[]:[90];t.strict&&!u.length&&(s+="/");for(let c=0;c<u.length;c++){const h=u[c];let p=40+(t.sensitive?.25:0);if(h.type===0)c||(s+="/"),s+=h.value.replace(Is,"\\$&"),p+=40;else if(h.type===1){const{value:w,repeatable:P,optional:S,regexp:m}=h;r.push({name:w,repeatable:P,optional:S});const C=m||li;if(C!==li){p+=10;try{new RegExp(`(${C})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${w}" (${C}): `+V.message)}}let I=P?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;c||(I=S&&u.length<2?`(?:/${I})`:"/"+I),S&&(I+="?"),s+=I,p+=20,S&&(p+=-8),P&&(p+=-20),C===".*"&&(p+=-50)}f.push(p)}n.push(f)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,t.sensitive?"":"i");function o(u){const f=u.match(a),c={};if(!f)return null;for(let h=1;h<f.length;h++){const p=f[h]||"",w=r[h-1];c[w.name]=p&&w.repeatable?p.split("/"):p}return c}function l(u){let f="",c=!1;for(const h of i){(!c||!f.endsWith("/"))&&(f+="/"),c=!1;for(const p of h)if(p.type===0)f+=p.value;else if(p.type===1){const{value:w,repeatable:P,optional:S}=p,m=w in u?u[w]:"";if(X(m)&&!P)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const C=X(m)?m.join("/"):m;if(!C)if(S)h.length<2&&(f.endsWith("/")?f=f.slice(0,-1):c=!0);else throw new Error(`Missing required param "${w}"`);f+=C}}return f||"/"}return{re:a,score:n,keys:r,parse:o,stringify:l}}function As(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=e[t]-i[t];if(n)return n;t++}return i.length<e.length?i.length===1&&i[0]===80?-1:1:i.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ji(i,e){let t=0;const n=i.score,s=e.score;for(;t<n.length&&t<s.length;){const r=As(n[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-n.length)===1){if(ci(n))return 1;if(ci(s))return-1}return s.length-n.length}function ci(i){const e=i[i.length-1];return i.length>0&&e[e.length-1]<0}const Ts={type:0,value:""},Os=/[a-zA-Z0-9_]/;function Ds(i){if(!i)return[[]];if(i==="/")return[[Ts]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=0,n=t;const s=[];let r;function a(){r&&s.push(r),r=[]}let o=0,l,u="",f="";function c(){u&&(t===0?r.push({type:0,value:u}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<i.length;){if(l=i[o++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(u&&c(),a()):l===":"?(c(),t=1):h();break;case 4:h(),t=n;break;case 1:l==="("?t=2:Os.test(l)?h():(c(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:t=3:f+=l;break;case 3:c(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,f="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),c(),a(),s}function xs(i,e,t){const n=Rs(Ds(i.path),t),s=A(n,{record:i,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Es(i,e){const t=[],n=new Map;e=di({strict:!1,end:!0,sensitive:!1},e);function s(c){return n.get(c)}function r(c,h,p){const w=!p,P=hi(c);P.aliasOf=p&&p.record;const S=di(e,c),m=[P];if("alias"in c){const V=typeof c.alias=="string"?[c.alias]:c.alias;for(const E of V)m.push(hi(A({},P,{components:p?p.record.components:P.components,path:E,aliasOf:p?p.record:P})))}let C,I;for(const V of m){const{path:E}=V;if(h&&E[0]!=="/"){const j=h.record.path,z=j[j.length-1]==="/"?"":"/";V.path=h.record.path+(E&&z+E)}if(C=xs(V,h,S),p?p.alias.push(C):(I=I||C,I!==C&&I.alias.push(C),w&&c.name&&!fi(C)&&a(c.name)),Qi(C)&&l(C),P.children){const j=P.children;for(let z=0;z<j.length;z++)r(j[z],C,p&&p.children[z])}p=p||C}return I?()=>{a(I)}:Le}function a(c){if(qi(c)){const h=n.get(c);h&&(n.delete(c),t.splice(t.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=t.indexOf(c);h>-1&&(t.splice(h,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return t}function l(c){const h=Fs(c,t);t.splice(h,0,c),c.record.name&&!fi(c)&&n.set(c.record.name,c)}function u(c,h){let p,w={},P,S;if("name"in c&&c.name){if(p=n.get(c.name),!p)throw ke(1,{location:c});S=p.record.name,w=A(ui(h.params,p.keys.filter(I=>!I.optional).concat(p.parent?p.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),c.params&&ui(c.params,p.keys.map(I=>I.name))),P=p.stringify(w)}else if(c.path!=null)P=c.path,p=t.find(I=>I.re.test(P)),p&&(w=p.parse(P),S=p.record.name);else{if(p=h.name?n.get(h.name):t.find(I=>I.re.test(h.path)),!p)throw ke(1,{location:c,currentLocation:h});S=p.record.name,w=A({},h.params,c.params),P=p.stringify(w)}const m=[];let C=p;for(;C;)m.unshift(C.record),C=C.parent;return{name:S,path:P,params:w,matched:m,meta:Ls(m)}}i.forEach(c=>r(c));function f(){t.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:o,getRecordMatcher:s}}function ui(i,e){const t={};for(const n of e)n in i&&(t[n]=i[n]);return t}function hi(i){const e={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:Ms(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ms(i){const e={},t=i.props||!1;if("component"in i)e.default=t;else for(const n in i.components)e[n]=typeof t=="object"?t[n]:t;return e}function fi(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function Ls(i){return i.reduce((e,t)=>A(e,t.meta),{})}function di(i,e){const t={};for(const n in i)t[n]=n in e?e[n]:i[n];return t}function Fs(i,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;Ji(i,e[r])<0?n=r:t=r+1}const s=Us(i);return s&&(n=e.lastIndexOf(s,n-1)),n}function Us(i){let e=i;for(;e=e.parent;)if(Qi(e)&&Ji(i,e)===0)return e}function Qi({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function Ns(i){const e={};if(i===""||i==="?")return e;const n=(i[0]==="?"?i.slice(1):i).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Hi," "),a=r.indexOf("="),o=Be(a<0?r:r.slice(0,a)),l=a<0?null:Be(r.slice(a+1));if(o in e){let u=e[o];X(u)||(u=e[o]=[u]),u.push(l)}else e[o]=l}return e}function pi(i){let e="";for(let t in i){const n=i[t];if(t=ns(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(X(n)?n.map(r=>r&&Ot(r)):[n&&Ot(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function Bs(i){const e={};for(const t in i){const n=i[t];n!==void 0&&(e[t]=X(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const Vs=Symbol(""),gi=Symbol(""),Gt=Symbol(""),Zi=Symbol(""),xt=Symbol("");function De(){let i=[];function e(n){return i.push(n),()=>{const s=i.indexOf(n);s>-1&&i.splice(s,1)}}function t(){i=[]}return{add:e,list:()=>i.slice(),reset:t}}function ie(i,e,t,n,s,r=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(ke(4,{from:t,to:e})):h instanceof Error?l(h):Ps(h)?l(ke(2,{from:e,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},f=r(()=>i.call(n&&n.instances[s],e,t,u));let c=Promise.resolve(f);i.length<3&&(c=c.then(u)),c.catch(h=>l(h))})}function vt(i,e,t,n,s=r=>r()){const r=[];for(const a of i)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(_i(l)){const f=(l.__vccOpts||l)[e];f&&r.push(ie(f,t,n,a,o,s))}else{let u=l();r.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const c=Wn(f)?f.default:f;a.mods[o]=f,a.components[o]=c;const p=(c.__vccOpts||c)[e];return p&&ie(p,t,n,a,o,s)()}))}}return r}function mi(i){const e=Ne(Gt),t=Ne(Zi),n=Y(()=>{const l=Me(i.to);return e.resolve(l)}),s=Y(()=>{const{matched:l}=n.value,{length:u}=l,f=l[u-1],c=t.matched;if(!f||!c.length)return-1;const h=c.findIndex(Pe.bind(null,f));if(h>-1)return h;const p=yi(l[u-2]);return u>1&&yi(f)===p&&c[c.length-1].path!==p?c.findIndex(Pe.bind(null,l[u-2])):h}),r=Y(()=>s.value>-1&&zs(t.params,n.value.params)),a=Y(()=>s.value>-1&&s.value===t.matched.length-1&&Ki(t.params,n.value.params));function o(l={}){if(Hs(l)){const u=e[Me(i.replace)?"replace":"push"](Me(i.to)).catch(Le);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:Y(()=>n.value.href),isActive:r,isExactActive:a,navigate:o}}function Gs(i){return i.length===1?i[0]:i}const _s=le({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mi,setup(i,{slots:e}){const t=Cn(mi(i)),{options:n}=Ne(Gt),s=Y(()=>({[Si(i.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[Si(i.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&Gs(e.default(t));return i.custom?r:Gi("a",{"aria-current":t.isExactActive?i.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),js=_s;function Hs(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const e=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return i.preventDefault&&i.preventDefault(),!0}}function zs(i,e){for(const t in e){const n=e[t],s=i[t];if(typeof n=="string"){if(n!==s)return!1}else if(!X(s)||s.length!==n.length||n.some((r,a)=>r!==s[a]))return!1}return!0}function yi(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const Si=(i,e,t)=>i??e??t,$s=le({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:e,slots:t}){const n=Ne(xt),s=Y(()=>i.route||n.value),r=Ne(gi,0),a=Y(()=>{let u=Me(r);const{matched:f}=s.value;let c;for(;(c=f[u])&&!c.components;)u++;return u}),o=Y(()=>s.value.matched[a.value]);gt(gi,Y(()=>a.value+1)),gt(Vs,o),gt(xt,s);const l=x();return Bt(()=>[l.value,o.value,i.name],([u,f,c],[h,p,w])=>{f&&(f.instances[c]=u,p&&p!==f&&u&&u===h&&(f.leaveGuards.size||(f.leaveGuards=p.leaveGuards),f.updateGuards.size||(f.updateGuards=p.updateGuards))),u&&f&&(!p||!Pe(f,p)||!h)&&(f.enterCallbacks[c]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,f=i.name,c=o.value,h=c&&c.components[f];if(!h)return vi(t.default,{Component:h,route:u});const p=c.props[f],w=p?p===!0?u.params:typeof p=="function"?p(u):p:null,S=Gi(h,A({},w,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(c.instances[f]=null)},ref:l}));return vi(t.default,{Component:S,route:u})||S}}});function vi(i,e){if(!i)return null;const t=i(e);return t.length===1?t[0]:t}const Ws=$s;function Ks(i){const e=Es(i.routes,i),t=i.parseQuery||Ns,n=i.stringifyQuery||pi,s=i.history,r=De(),a=De(),o=De(),l=yn(te);let u=te;Ce&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=yt.bind(null,d=>""+d),c=yt.bind(null,rs),h=yt.bind(null,Be);function p(d,y){let g,v;return qi(d)?(g=e.getRecordMatcher(d),v=y):v=d,e.addRoute(v,g)}function w(d){const y=e.getRecordMatcher(d);y&&e.removeRoute(y)}function P(){return e.getRoutes().map(d=>d.record)}function S(d){return!!e.getRecordMatcher(d)}function m(d,y){if(y=A({},y||l.value),typeof d=="string"){const k=St(t,d,y.path),G=e.resolve({path:k.path},y),Oe=s.createHref(k.fullPath);return A(k,G,{params:h(G.params),hash:Be(k.hash),redirectedFrom:void 0,href:Oe})}let g;if(d.path!=null)g=A({},d,{path:St(t,d.path,y.path).path});else{const k=A({},d.params);for(const G in k)k[G]==null&&delete k[G];g=A({},d,{params:c(k)}),y.params=c(y.params)}const v=e.resolve(g,y),D=d.hash||"";v.params=f(h(v.params));const U=ls(n,A({},d,{hash:is(D),path:v.path})),R=s.createHref(U);return A({fullPath:U,hash:D,query:n===pi?Bs(d.query):d.query||{}},v,{redirectedFrom:void 0,href:R})}function C(d){return typeof d=="string"?St(t,d,l.value.path):A({},d)}function I(d,y){if(u!==d)return ke(8,{from:y,to:d})}function V(d){return z(d)}function E(d){return V(A(C(d),{replace:!0}))}function j(d){const y=d.matched[d.matched.length-1];if(y&&y.redirect){const{redirect:g}=y;let v=typeof g=="function"?g(d):g;return typeof v=="string"&&(v=v.includes("?")||v.includes("#")?v=C(v):{path:v},v.params={}),A({query:d.query,hash:d.hash,params:v.path!=null?{}:d.params},v)}}function z(d,y){const g=u=m(d),v=l.value,D=d.state,U=d.force,R=d.replace===!0,k=j(g);if(k)return z(A(C(k),{state:typeof k=="object"?A({},D,k.state):D,force:U,replace:R}),y||g);const G=g;G.redirectedFrom=y;let Oe;return!U&&cs(n,v,g)&&(Oe=ke(16,{to:G,from:v}),ei(v,v,!0,!1)),(Oe?Promise.resolve(Oe):Yt(G,v)).catch($=>Z($)?Z($,2)?$:ht($):ut($,G,v)).then($=>{if($){if(Z($,2))return z(A({replace:R},C($.to),{state:typeof $.to=="object"?A({},D,$.to.state):D,force:U}),y||G)}else $=Qt(G,v,!0,R,D);return Jt(G,v,$),$})}function ot(d,y){const g=I(d,y);return g?Promise.reject(g):Promise.resolve()}function lt(d){const y=je.values().next().value;return y&&typeof y.runWithContext=="function"?y.runWithContext(d):d()}function Yt(d,y){let g;const[v,D,U]=Xs(d,y);g=vt(v.reverse(),"beforeRouteLeave",d,y);for(const k of v)k.leaveGuards.forEach(G=>{g.push(ie(G,d,y))});const R=ot.bind(null,d,y);return g.push(R),ve(g).then(()=>{g=[];for(const k of r.list())g.push(ie(k,d,y));return g.push(R),ve(g)}).then(()=>{g=vt(D,"beforeRouteUpdate",d,y);for(const k of D)k.updateGuards.forEach(G=>{g.push(ie(G,d,y))});return g.push(R),ve(g)}).then(()=>{g=[];for(const k of U)if(k.beforeEnter)if(X(k.beforeEnter))for(const G of k.beforeEnter)g.push(ie(G,d,y));else g.push(ie(k.beforeEnter,d,y));return g.push(R),ve(g)}).then(()=>(d.matched.forEach(k=>k.enterCallbacks={}),g=vt(U,"beforeRouteEnter",d,y,lt),g.push(R),ve(g))).then(()=>{g=[];for(const k of a.list())g.push(ie(k,d,y));return g.push(R),ve(g)}).catch(k=>Z(k,8)?k:Promise.reject(k))}function Jt(d,y,g){o.list().forEach(v=>lt(()=>v(d,y,g)))}function Qt(d,y,g,v,D){const U=I(d,y);if(U)return U;const R=y===te,k=Ce?history.state:{};g&&(v||R?s.replace(d.fullPath,A({scroll:R&&k&&k.scroll},D)):s.push(d.fullPath,D)),l.value=d,ei(d,y,g,R),ht()}let Te;function pn(){Te||(Te=s.listen((d,y,g)=>{if(!ti.listening)return;const v=m(d),D=j(v);if(D){z(A(D,{replace:!0,force:!0}),v).catch(Le);return}u=v;const U=l.value;Ce&&ys(ri(U.fullPath,g.delta),et()),Yt(v,U).catch(R=>Z(R,12)?R:Z(R,2)?(z(A(C(R.to),{force:!0}),v).then(k=>{Z(k,20)&&!g.delta&&g.type===Ve.pop&&s.go(-1,!1)}).catch(Le),Promise.reject()):(g.delta&&s.go(-g.delta,!1),ut(R,v,U))).then(R=>{R=R||Qt(v,U,!1),R&&(g.delta&&!Z(R,8)?s.go(-g.delta,!1):g.type===Ve.pop&&Z(R,20)&&s.go(-1,!1)),Jt(v,U,R)}).catch(Le)}))}let ct=De(),Zt=De(),_e;function ut(d,y,g){ht(d);const v=Zt.list();return v.length?v.forEach(D=>D(d,y,g)):console.error(d),Promise.reject(d)}function gn(){return _e&&l.value!==te?Promise.resolve():new Promise((d,y)=>{ct.add([d,y])})}function ht(d){return _e||(_e=!d,pn(),ct.list().forEach(([y,g])=>d?g(d):y()),ct.reset()),d}function ei(d,y,g,v){const{scrollBehavior:D}=i;if(!Ce||!D)return Promise.resolve();const U=!g&&Ss(ri(d.fullPath,0))||(v||!g)&&history.state&&history.state.scroll||null;return vn().then(()=>D(d,y,U)).then(R=>R&&ms(R)).catch(R=>ut(R,d,y))}const ft=d=>s.go(d);let dt;const je=new Set,ti={currentRoute:l,listening:!0,addRoute:p,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:P,resolve:m,options:i,push:V,replace:E,go:ft,back:()=>ft(-1),forward:()=>ft(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:Zt.add,isReady:gn,install(d){const y=this;d.component("RouterLink",js),d.component("RouterView",Ws),d.config.globalProperties.$router=y,Object.defineProperty(d.config.globalProperties,"$route",{enumerable:!0,get:()=>Me(l)}),Ce&&!dt&&l.value===te&&(dt=!0,V(s.location).catch(D=>{}));const g={};for(const D in te)Object.defineProperty(g,D,{get:()=>l.value[D],enumerable:!0});d.provide(Gt,y),d.provide(Zi,Sn(g)),d.provide(xt,l);const v=d.unmount;je.add(d),d.unmount=function(){je.delete(d),je.size<1&&(u=te,Te&&Te(),Te=null,l.value=te,dt=!1,_e=!1),v()}}};function ve(d){return d.reduce((y,g)=>y.then(()=>lt(g)),Promise.resolve())}return ti}function Xs(i,e){const t=[],n=[],s=[],r=Math.max(e.matched.length,i.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(i.matched.find(u=>Pe(u,o))?n.push(o):t.push(o));const l=i.matched[a];l&&(e.matched.find(u=>Pe(u,l))||s.push(l))}return[t,n,s]}const qs=le({name:"PredictionView",setup(){const i=x(null),e=x(!1),t=x(null),n=x(null),s=x(!1),r=x(!1),a=x([]),o=x(null),l=()=>{e.value=!0},u=()=>{e.value=!1},f=S=>{if(e.value=!1,!S.dataTransfer)return;const m=S.dataTransfer.files;m.length>0&&(t.value=m[0],a.value=[],n.value=URL.createObjectURL(m[0]))},c=()=>{var S;(S=i.value)==null||S.click()},h=()=>{var m;const S=(m=i.value)==null?void 0:m.files;S&&S.length>0&&(t.value=S[0],a.value=[],n.value=URL.createObjectURL(S[0]))},p=async()=>{if(t.value){r.value=!0;try{const S=new FormData;S.append("file",t.value);const m=`https://172.27.2.39/api/predict?segmentation=${s.value}`,I=await(await fetch(m,{method:"POST",body:S})).json();a.value=I.detections||[]}catch(S){console.error("[PredictionView] Prediction error:",S)}finally{r.value=!1}}};Bt([n,a,s],()=>{w()});const w=()=>{if(!n.value){P();return}const S=o.value;if(!S)return;const m=S.getContext("2d");if(!m)return;const C=new Image;C.src=n.value,C.onload=()=>{S.width=C.width+50*2,S.height=C.height+50*2,m.fillStyle="black",m.fillRect(0,0,S.width,S.height),m.drawImage(C,50,50,C.width,C.height),a.value.length!==0&&a.value.forEach(V=>{if(s.value&&V.segmentation){const E=V.segmentation;if(E){m.beginPath(),m.moveTo(E[0][0]+50,E[0][1]+50);for(let j=1;j<E.length;j++)m.lineTo(E[j][0]+50,E[j][1]+50);m.closePath(),m.strokeStyle="#FF8C00",m.lineWidth=2,m.stroke(),m.font="16px Arial",m.fillStyle="#FF8C00",m.fillText(`Conf: ${V.score.toFixed(2)}`,E[0][0]+50,E[0][1]+50-5)}}else{const[E,j,z,ot]=V.bbox;m.strokeStyle="#FF8C00",m.lineWidth=2,m.strokeRect(E+50,j+50,z-E,ot-j),m.font="16px Arial",m.fillStyle="#FF8C00",m.fillText(`Conf: ${V.score.toFixed(2)}`,E+50,j+50-5)}})}},P=()=>{const S=o.value;if(!S)return;const m=S.getContext("2d");m&&m.clearRect(0,0,S.width,S.height)};return{fileInput:i,isDragActive:e,imageFile:t,previewUrl:n,segmentation:s,loading:r,detections:a,canvasRef:o,onDragOver:l,onDragLeave:u,onDrop:f,handleFileChange:h,handlePredict:p,openFileDialog:c}}}),Ys={class:"prediction-container"},Js={key:0},Qs={key:1},Zs={for:"segmentation-checkbox",class:"segmentation-label"},er=["disabled"],tr=["disabled"],ir={key:0,class:"canvas-container"},nr={ref:"canvasRef",class:"preview-canvas"};function sr(i,e,t,n,s,r){return T(),O("div",Ys,[e[8]||(e[8]=L("h2",null,"Detection by Upload",-1)),L("div",{class:bn(["dropzone",{"dropzone-active":i.isDragActive}]),onDragover:e[1]||(e[1]=mt((...a)=>i.onDragOver&&i.onDragOver(...a),["prevent"])),onDragleave:e[2]||(e[2]=mt((...a)=>i.onDragLeave&&i.onDragLeave(...a),["prevent"])),onDrop:e[3]||(e[3]=mt((...a)=>i.onDrop&&i.onDrop(...a),["prevent"])),onClick:e[4]||(e[4]=(...a)=>i.openFileDialog&&i.openFileDialog(...a))},[i.isDragActive?(T(),O("p",Qs,"Drop the image here...")):(T(),O("p",Js,"Drag and drop an image here, or click to select one")),L("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:e[0]||(e[0]=(...a)=>i.handleFileChange&&i.handleFileChange(...a)),hidden:""},null,544)],34),L("label",Zs,[wn(L("input",{type:"checkbox",id:"segmentation-checkbox","onUpdate:modelValue":e[5]||(e[5]=a=>i.segmentation=a),disabled:i.loading},null,8,er),[[Pn,i.segmentation]]),e[7]||(e[7]=Tt(" Segmentation "))]),L("button",{disabled:i.loading||!i.imageFile,onClick:e[6]||(e[6]=(...a)=>i.handlePredict&&i.handlePredict(...a)),class:"detect-button"},we(i.loading?"Processing...":"Detect"),9,tr),i.previewUrl?(T(),O("div",ir,[L("canvas",nr,null,512)])):de("",!0)])}const rr=Ie(qs,[["render",sr],["__scopeId","data-v-98d937ee"]]);var tt=typeof self<"u"?self:global;const Ge=typeof navigator<"u",ar=Ge&&typeof HTMLImageElement>"u",qe=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),it=tt.Buffer,He=tt.BigInt,nt=!!it,or=i=>i;function Ye(i,e=or){if(qe)try{return typeof require=="function"?Promise.resolve(e(require(i))):import(i).then(e)}catch{console.warn(`Couldn't load ${i}`)}}let _t=tt.fetch;const lr=i=>_t=i;if(!tt.fetch){const i=Ye("http",n=>n),e=Ye("https",n=>n),t=(n,{headers:s}={})=>new Promise(async(r,a)=>{let{port:o,hostname:l,pathname:u,protocol:f,search:c}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+c,headers:s};o!==""&&(h.port=Number(o));const p=(f==="https:"?await e:await i).request(h,w=>{if(w.statusCode===301||w.statusCode===302){let P=new URL(w.headers.location,n).toString();return t(P,{headers:s}).then(r).catch(a)}r({status:w.statusCode,arrayBuffer:()=>new Promise(P=>{let S=[];w.on("data",m=>S.push(m)),w.on("end",()=>P(Buffer.concat(S)))})})});p.on("error",a),p.end()});lr(t)}function b(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}const Je=i=>en(i)?void 0:i,cr=i=>i!==void 0;function en(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(cr).length===0)}function B(i){let e=new Error(i);throw delete e.stack,e}function ue(i){return(i=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(i).trim())===""?void 0:i}function Et(i){let e=function(t){let n=0;return t.ifd0.enabled&&(n+=1024),t.exif.enabled&&(n+=2048),t.makerNote&&(n+=2048),t.userComment&&(n+=1024),t.gps.enabled&&(n+=512),t.interop.enabled&&(n+=100),t.ifd1.enabled&&(n+=1024),n+2048}(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}const Mt=i=>String.fromCharCode.apply(null,i),Ci=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function tn(i){return Ci?Ci.decode(i):nt?Buffer.from(i).toString("utf8"):decodeURIComponent(escape(Mt(i)))}class W{static from(e,t){return e instanceof this&&e.le===t?e:new W(e,void 0,void 0,t)}constructor(e,t=0,n,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-t);let r=new DataView(e,t,n);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof W){n===void 0&&(n=e.byteLength-t),(t+=e.byteOffset)+n>e.byteOffset+e.byteLength&&B("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,n);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else B("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,n=W){return e instanceof DataView||e instanceof W?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||B("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new W(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return tn(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let n=this.getUint8Array(e,t);return Mt(n)}getUnicodeString(e=0,t=this.byteLength){const n=[];for(let s=0;s<t&&e+s<this.byteLength;s+=2)n.push(this.getUint16(e+s));return Mt(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Lt(i,e){B(`${i} '${e}' was not loaded, try using full build of exifr.`)}class jt extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Lt(this.kind,e),t&&(e in t||function(n,s){B(`Unknown ${n} '${s}'.`)}(this.kind,e),t[e].enabled||Lt(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var J=new jt("file parser"),N=new jt("segment parser"),Q=new jt("file reader");function ur(i,e){return typeof i=="string"?bi(i,e):Ge&&!ar&&i instanceof HTMLImageElement?bi(i.src,e):i instanceof Uint8Array||i instanceof ArrayBuffer||i instanceof DataView?new W(i):Ge&&i instanceof Blob?Ft(i,e,"blob",ge):void B("Invalid input argument")}function bi(i,e){return(t=i).startsWith("data:")||t.length>1e4?Ut(i,e,"base64"):qe&&i.includes("://")?Ft(i,e,"url",pe):qe?Ut(i,e,"fs"):Ge?Ft(i,e,"url",pe):void B("Invalid input argument");var t}async function Ft(i,e,t,n){return Q.has(t)?Ut(i,e,t):n?async function(s,r){let a=await r(s);return new W(a)}(i,n):void B(`Parser ${t} is not loaded`)}async function Ut(i,e,t){let n=new(Q.get(t))(i,e);return await n.read(),n}const pe=i=>_t(i).then(e=>e.arrayBuffer()),ge=i=>new Promise((e,t)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=t,n.readAsArrayBuffer(i)});class hr extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function F(i,e,t){let n=new hr;for(let[s,r]of t)n.set(s,r);if(Array.isArray(e))for(let s of e)i.set(s,n);else i.set(e,n);return n}function me(i,e,t){let n,s=i.get(e);for(n of t)s.set(n[0],n[1])}const _=new Map,q=new Map,oe=new Map,ne=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Re=["jfif","xmp","icc","iptc","ihdr"],ye=["tiff",...Re],M=["ifd0","ifd1","exif","gps","interop"],se=[...ye,...M],re=["makerNote","userComment"],Ae=["translateKeys","translateValues","reviveValues","multiSegment"],ae=[...Ae,"sanitize","mergeOutput","silentErrors"];class nn{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class xe extends nn{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,s){if(super(),b(this,"enabled",!1),b(this,"skip",new Set),b(this,"pick",new Set),b(this,"deps",new Set),b(this,"translateKeys",!1),b(this,"translateValues",!1),b(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=M.includes(e),this.canBeFiltered&&(this.dict=_.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:r,skip:a}=n;r&&r.length>0&&this.translateTagSet(r,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:B(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of Ae)n=e[t],n!==void 0&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,s,{tagKeys:r,tagValues:a}=this.dict;for(n of e)typeof n=="string"?(s=a.indexOf(n),s===-1&&(s=r.indexOf(Number(n))),s!==-1&&t.add(Number(r[s]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Qe(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Qe(this.pick,this.deps)}}var H={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},wi=new Map;class Se extends nn{static useCached(e){let t=wi.get(e);return t!==void 0||(t=new this(e),wi.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):B(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Ge?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of ne)this[e]=H[e];for(e of ae)this[e]=H[e];for(e of re)this[e]=H[e];for(e of se)this[e]=new xe(e,H[e],void 0,this)}setupFromTrue(){let e;for(e of ne)this[e]=H[e];for(e of ae)this[e]=H[e];for(e of re)this[e]=!0;for(e of se)this[e]=new xe(e,!0,void 0,this)}setupFromArray(e){let t;for(t of ne)this[t]=H[t];for(t of ae)this[t]=H[t];for(t of re)this[t]=H[t];for(t of se)this[t]=new xe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,M)}setupFromObject(e){let t;for(t of(M.ifd0=M.ifd0||M.image,M.ifd1=M.ifd1||M.thumbnail,Object.assign(this,e),ne))this[t]=Ct(e[t],H[t]);for(t of ae)this[t]=Ct(e[t],H[t]);for(t of re)this[t]=Ct(e[t],H[t]);for(t of ye)this[t]=new xe(t,H[t],e[t],this);for(t of M)this[t]=new xe(t,H[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,M,se),e.tiff===!0?this.batchEnableWithBool(M,!0):e.tiff===!1?this.batchEnableWithUserValue(M,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,M):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,M)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let s=t[n];this[n].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(e,t,n,s=n){if(e&&e.length){for(let a of s)this[a].enabled=!1;let r=Pi(e,n);for(let[a,o]of r)Qe(this[a].pick,o),this[a].enabled=!0}else if(t&&t.length){let r=Pi(t,n);for(let[a,o]of r)Qe(this[a].skip,o)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:s,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),s.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:s}=this;s.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=M.some(r=>this[r].enabled===!0)||this.makerNote||this.userComment;for(let r of M)this[r].finalizeFilters()}get onlyTiff(){return!Re.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of ye)this[e].enabled&&!N.has(e)&&Lt("segment parser",e)}}function Pi(i,e){let t,n,s,r,a=[];for(s of e){for(r of(t=_.get(s),n=[],t))(i.includes(r[0])||i.includes(r[1]))&&n.push(r[0]);n.length&&a.push([s,n])}return a}function Ct(i,e){return i!==void 0?i:e!==void 0?e:void 0}function Qe(i,e){for(let t of e)i.add(t)}b(Se,"default",H);class ce{constructor(e){b(this,"parsers",{}),b(this,"output",{}),b(this,"errors",[]),b(this,"pushToErrors",t=>this.errors.push(t)),this.options=Se.useCached(e)}async read(e){this.file=await ur(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,s]of J)if(s.canHandle(e,t))return this.fileParser=new s(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),B("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Je(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async n=>{let s=await n.parse();n.assignToOutput(e,s)});this.options.silentErrors&&(t=t.map(n=>n.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=N.get("tiff",e);var s;if(t.tiff?s={start:0,type:"tiff"}:t.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let r=await this.fileParser.ensureSegmentChunk(s),a=this.parsers.tiff=new n(r,e,t),o=await a.extractThumbnail();return t.close&&t.close(),o}}async function st(i,e){let t=new ce(e);return await t.read(i),t.parse()}var fr=Object.freeze({__proto__:null,parse:st,Exifr:ce,fileParsers:J,segmentParsers:N,fileReaders:Q,tagKeys:_,tagValues:q,tagRevivers:oe,createDictionary:F,extendDictionary:me,fetchUrlAsArrayBuffer:pe,readBlobAsArrayBuffer:ge,chunkedProps:ne,otherSegments:Re,segments:ye,tiffBlocks:M,segmentsAndBlocks:se,tiffExtractables:re,inheritables:Ae,allFormatters:ae,Options:Se});class rt{constructor(e,t,n){b(this,"errors",[]),b(this,"ensureSegmentChunk",async s=>{let r=s.start,a=s.size||65536;if(this.file.chunked)if(this.file.available(r,a))s.chunk=this.file.subarray(r,a);else try{s.chunk=await this.file.readChunk(r,a)}catch(o){B(`Couldn't read segment: ${JSON.stringify(s)}. ${o.message}`)}else this.file.byteLength>r+a?s.chunk=this.file.subarray(r,a):s.size===void 0?s.chunk=this.file.subarray(r):B("Segment unreachable: "+JSON.stringify(s));return s.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new(N.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:n,chunk:s}=t,r=this.options[n];if(r&&r.enabled){let a=this.parsers[n];a&&a.append||a||this.createParser(n,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class K{static findPosition(e,t){let n=e.getUint16(t+2)+2,s=typeof this.headerLength=="function"?this.headerLength(e,t,n):this.headerLength,r=t+s,a=n-s;return{offset:t,length:n,headerLength:s,start:r,size:a,end:r+a}}static parse(e,t={}){return new this(e,new Se({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof W?e:new W(e)}constructor(e,t={},n){b(this,"errors",[]),b(this,"raw",new Map),b(this,"handleError",s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)}),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=oe.get(t),s=q.get(t),r=_.get(t),a=this.options[t],o=a.reviveValues&&!!n,l=a.translateValues&&!!s,u=a.translateKeys&&!!r,f={};for(let[c,h]of e)o&&n.has(c)?h=n.get(c)(h):l&&s.has(c)&&(h=this.translateValue(h,s.get(c))),u&&r.has(c)&&(c=r.get(c)||c),f[c]=h;return f}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}b(K,"headerLength",4),b(K,"type",void 0),b(K,"multiSegment",!1),b(K,"canHandle",()=>!1);function dr(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function pr(i){return i>=224&&i<=239}function gr(i,e,t){for(let[n,s]of N)if(s.canHandle(i,e,t))return n}class ki extends rt{constructor(...e){super(...e),b(this,"appSegments",[]),b(this,"jpegSegments",[]),b(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(N.keyList())):(e=e===void 0?N.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&N.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:n,findAll:s,wanted:r,remaining:a}=this;if(!s&&this.file.chunked&&(s=Array.from(r).some(o=>{let l=N.get(o),u=this.options[o];return l.multiSegment&&u.multiSegment}),s&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let o=!1;for(;a.size>0&&!o&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(o=e>l&&!u?!await n.readNextChunk(e):!await n.readNextChunk(l),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let n,s,r,a,o,l,{file:u,findAll:f,wanted:c,remaining:h,options:p}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(n=u.getUint8(e+1),pr(n)){if(s=u.getUint16(e+2),r=gr(u,e,s),r&&c.has(r)&&(a=N.get(r),o=a.findPosition(u,e),l=p[r],o.type=r,this.appSegments.push(o),!f&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||h.delete(r)):h.delete(r),h.size===0)))break;p.recordUnknownSegments&&(o=K.findPosition(u,e),o.marker=n,this.unknownSegments.push(o)),e+=s+1}else if(dr(n)){if(s=u.getUint16(e+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:e,length:s,marker:n}),e+=s+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,n){let s,r,a,o=new Map;for(let l=0;l<t.length;l++)s=t[l],r=s[n],o.has(r)?a=o.get(r):o.set(r,a=[]),a.push(s);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,n])=>{let s=N.get(t,this.options);return s.handleMultiSegments?{type:t,chunk:s.handleMultiSegments(n)}:n[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}b(ki,"type","jpeg"),J.set("jpeg",ki);const mr=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class yr extends K{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,n=new Map){let{pick:s,skip:r}=this.options[t];s=new Set(s);let a=s.size>0,o=r.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(e);if(a){if(s.has(f)&&(n.set(f,this.parseTag(e,f,t)),s.delete(f),s.size===0))break}else!o&&r.has(f)||n.set(f,this.parseTag(e,f,t));e+=12}return n}parseTag(e,t,n){let{chunk:s}=this,r=s.getUint16(e+2),a=s.getUint32(e+4),o=mr[r];if(o*a<=4?e+=8:e=s.getUint32(e+8),(r<1||r>13)&&B(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>s.byteLength&&B(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${s.byteLength}`),r===1)return s.getUint8Array(e,a);if(r===2)return ue(s.getString(e,a));if(r===7)return s.getUint8Array(e,a);if(a===1)return this.parseTagValue(r,e);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(a),u=o;for(let f=0;f<a;f++)l[f]=this.parseTagValue(r,e),e+=u;return l}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);case 13:return n.getUint32(t);default:B(`Invalid tiff type ${e}`)}}}class bt extends yr{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&B("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&B(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Et(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Et(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&n.length===1&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Ii(...e.get(2),e.get(1))),e.set("longitude",Ii(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,s={};for(t of M)if(e=this[t],!en(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(s,n)}else s[t]=n;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,s]of Object.entries(t))this.assignObjectToOutput(e,n,s)}}function Ii(i,e,t,n){var s=i+e/60+t/3600;return n!=="S"&&n!=="W"||(s*=-1),s}b(bt,"type","tiff"),b(bt,"headerLength",10),N.set("tiff",bt);var Sr=Object.freeze({__proto__:null,default:fr,Exifr:ce,fileParsers:J,segmentParsers:N,fileReaders:Q,tagKeys:_,tagValues:q,tagRevivers:oe,createDictionary:F,extendDictionary:me,fetchUrlAsArrayBuffer:pe,readBlobAsArrayBuffer:ge,chunkedProps:ne,otherSegments:Re,segments:ye,tiffBlocks:M,segmentsAndBlocks:se,tiffExtractables:re,inheritables:Ae,allFormatters:ae,Options:Se,parse:st});const Ht={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},zt=Object.assign({},Ht,{firstChunkSize:4e4,gps:[1,2,3,4]});async function sn(i){let e=new ce(zt);await e.read(i);let t=await e.parse();if(t&&t.gps){let{latitude:n,longitude:s}=t.gps;return{latitude:n,longitude:s}}}const $t=Object.assign({},Ht,{tiff:!1,ifd1:!0,mergeOutput:!1});async function rn(i){let e=new ce($t);await e.read(i);let t=await e.extractThumbnail();return t&&nt?it.from(t):t}async function an(i){let e=await this.thumbnail(i);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}const Wt=Object.assign({},Ht,{firstChunkSize:4e4,ifd0:[274]});async function Kt(i){let e=new ce(Wt);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const Xt=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let he=!0,fe=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,n]=e;he=Number(t)+.1*Number(n)<13.4,fe=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);he=fe=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);he=fe=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);he=fe=Number(e)<77}}async function on(i){let e=await Kt(i);return Object.assign({canvas:he,css:fe},Xt[e])}class vr extends W{constructor(...e){super(...e),b(this,"ranges",new Cr),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(e===0&&this.byteLength===0&&n){let s=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(s)}else{let s=e+t;if(s>this.byteLength){let{dataView:r}=this._extend(s);this._swapDataView(r)}}}_extend(e){let t;t=nt?it.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t,n=!1){return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,n=!1){n&&this._tryExtend(t,e.byteLength,e);let s=super.set(e,t);return this.ranges.add(t,s.byteLength),s}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Cr{constructor(){b(this,"list",[])}get length(){return this.list.length}add(e,t,n=0){let s=e+t,r=this.list.filter(a=>Ri(e,a.offset,s)||Ri(e,a.end,s));if(r.length>0){e=Math.min(e,...r.map(o=>o.offset)),s=Math.max(s,...r.map(o=>o.end)),t=s-e;let a=r.shift();a.offset=e,a.length=t,a.end=s,this.list=this.list.filter(o=>!r.includes(o))}else this.list.push({offset:e,length:t,end:s})}available(e,t){let n=e+t;return this.list.some(s=>s.offset<=e&&n<=s.end)}}function Ri(i,e,t){return i<=e&&e<=t}class at extends vr{constructor(e,t){super(0),b(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Q.set("blob",class extends at{async readWhole(){this.chunked=!1;let i=await ge(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,n=this.input.slice(i,t),s=await ge(n);return this.set(s,i,!0)}});var br=Object.freeze({__proto__:null,default:Sr,Exifr:ce,fileParsers:J,segmentParsers:N,fileReaders:Q,tagKeys:_,tagValues:q,tagRevivers:oe,createDictionary:F,extendDictionary:me,fetchUrlAsArrayBuffer:pe,readBlobAsArrayBuffer:ge,chunkedProps:ne,otherSegments:Re,segments:ye,tiffBlocks:M,segmentsAndBlocks:se,tiffExtractables:re,inheritables:Ae,allFormatters:ae,Options:Se,parse:st,gpsOnlyOptions:zt,gps:sn,thumbnailOnlyOptions:$t,thumbnail:rn,thumbnailUrl:an,orientationOnlyOptions:Wt,orientation:Kt,rotations:Xt,get rotateCanvas(){return he},get rotateCss(){return fe},rotation:on});Q.set("url",class extends at{async readWhole(){this.chunked=!1;let i=await pe(this.input);i instanceof ArrayBuffer?this._swapArrayBuffer(i):i instanceof Uint8Array&&this._swapBuffer(i)}async _readChunk(i,e){let t=e?i+e-1:void 0,n=this.options.httpHeaders||{};(i||t)&&(n.range=`bytes=${[i,t].join("-")}`);let s=await _t(this.input,{headers:n}),r=await s.arrayBuffer(),a=r.byteLength;if(s.status!==416)return a!==e&&(this.size=i+a),this.set(r,i,!0)}});W.prototype.getUint64=function(i){let e=this.getUint32(i),t=this.getUint32(i+4);return e<1048575?e<<32|t:typeof He!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),He(e)<<He(32)|He(t)):void B("Trying to read 64b value but JS can only handle 53b numbers.")};class wr extends rt{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(t.push(n),n.length===0)break;e+=n.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find(n=>n.kind===t)}parseBoxHead(e){let t=this.file.getUint32(e),n=this.file.getString(e+4,4),s=e+8;return t===1&&(t=this.file.getUint64(e+8),s+=8),{offset:e,length:t,kind:n,start:s}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class ln extends wr{static canHandle(e,t){if(t!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let s=16,r=[];for(;s<n;)r.push(e.getString(s,4)),s+=4;return r.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,n){await this.file.ensureChunk(t,n);let s=this.file.subarray(t,n);this.createParser(e,s)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let n=this.findBox(t,"ipco");if(n===void 0)return;let s=this.findBox(n,"colr");s!==void 0&&await this.registerSegment("icc",s.offset+12,s.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let s=this.findExifLocIdInIinf(t),r=this.findExtentInIloc(n,s);if(r===void 0)return;let[a,o]=r;await this.file.ensureChunk(a,o);let l=4+this.file.getUint32(a);a+=l,o-=l,await this.registerSegment("tiff",a,o)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,n,s,r,a=e.start,o=this.file.getUint16(a);for(a+=2;o--;){if(t=this.parseBoxHead(a),this.parseBoxFullHead(t),n=t.start,t.version>=2&&(s=t.version===3?4:2,r=this.file.getString(n+s+2,4),r==="Exif"))return this.file.getUintBytes(n,s);a+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let n=e.start,[s,r]=this.get8bits(n++),[a,o]=this.get8bits(n++),l=e.version===2?4:2,u=e.version===1||e.version===2?2:0,f=o+s+r,c=e.version===2?4:2,h=this.file.getUintBytes(n,c);for(n+=c;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+a;let w=this.file.getUint16(n);if(n+=2,p===t)return w>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+o,s),this.file.getUintBytes(n+o+s,r)];n+=w*f}}}class cn extends ln{}b(cn,"type","heic");class Ai extends ln{}b(Ai,"type","avif"),J.set("heic",cn),J.set("avif",Ai),F(_,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),F(_,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),F(_,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),F(q,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ue=F(q,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Ti={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ue.set(37392,Ti),Ue.set(41488,Ti);const wt={0:"Normal",1:"Low",2:"High"};function Oi(i){return typeof i=="object"&&i.length!==void 0?i[0]:i}function Di(i){let e=Array.from(i).slice(1);return e[1]>15&&(e=e.map(t=>String.fromCharCode(t))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function Pt(i){if(typeof i=="string"){var[e,t,n,s,r,a]=i.trim().split(/[-: ]/g).map(Number),o=new Date(e,t-1,n);return Number.isNaN(s)||Number.isNaN(r)||Number.isNaN(a)||(o.setHours(s),o.setMinutes(r),o.setSeconds(a)),Number.isNaN(+o)?i:o}}function Ee(i){if(typeof i=="string")return i;let e=[];if(i[1]===0&&i[i.length-1]===0)for(let t=0;t<i.length;t+=2)e.push(xi(i[t+1],i[t]));else for(let t=0;t<i.length;t+=2)e.push(xi(i[t],i[t+1]));return ue(String.fromCodePoint(...e))}function xi(i,e){return i<<8|e}Ue.set(41992,wt),Ue.set(41993,wt),Ue.set(41994,wt),F(oe,["ifd0","ifd1"],[[50827,function(i){return typeof i!="string"?tn(i):i}],[306,Pt],[40091,Ee],[40092,Ee],[40093,Ee],[40094,Ee],[40095,Ee]]),F(oe,"exif",[[40960,Di],[36864,Di],[36867,Pt],[36868,Pt],[40962,Oi],[40963,Oi]]),F(oe,"gps",[[0,i=>Array.from(i).join(".")],[7,i=>Array.from(i).join(":")]]);class kt extends K{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let n=super.findPosition(e,t);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map(t=>t.chunk.getString()).join("")}normalizeInput(e){return typeof e=="string"?e:W.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(r){let a={},o={};for(let l of dn)a[l]=[],o[l]=0;return r.replace(Rr,(l,u,f)=>{if(u==="<"){let c=++o[f];return a[f].push(c),`${l}#${c}`}return`${l}#${a[f].pop()}`})}(e);let t=be.findAll(e,"rdf","Description");t.length===0&&t.push(new be("rdf","Description",void 0,e));let n,s={};for(let r of t)for(let a of r.properties)n=Ir(a.ns,s),un(a,n);return function(r){let a;for(let o in r)a=r[o]=Je(r[o]),a===void 0&&delete r[o];return Je(r)}(s)}assignToOutput(e,t){if(this.localOptions.parse)for(let[n,s]of Object.entries(t))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",s);break;case"exif":this.assignObjectToOutput(e,"exif",s);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,s)}else e.xmp=t}}b(kt,"type","xmp"),b(kt,"multiSegment",!0),N.set("xmp",kt);class Ze{static findAll(e){return hn(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ze.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],s=e[3].slice(1,-1);return s=fn(s),new Ze(t,n,s)}constructor(e,t,n){this.ns=e,this.name=t,this.value=n}serialize(){return this.value}}class be{static findAll(e,t,n){if(t!==void 0||n!==void 0){t=t||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var s=new RegExp(`<(${t}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else s=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return hn(e,s).map(be.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],s=e[4],r=e[8];return new be(t,n,s,r)}constructor(e,t,n,s){this.ns=e,this.name=t,this.attrString=n,this.innerXml=s,this.attrs=Ze.findAll(n),this.children=be.findAll(s),this.value=this.children.length===0?fn(s):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return kr(this.children.map(Pr));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)un(t,e);return this.value!==void 0&&(e.value=this.value),Je(e)}}function un(i,e){let t=i.serialize();t!==void 0&&(e[i.name]=t)}var Pr=i=>i.serialize(),kr=i=>i.length===1?i[0]:i,Ir=(i,e)=>e[i]?e[i]:e[i]={};function hn(i,e){let t,n=[];if(!i)return n;for(;(t=e.exec(i))!==null;)n.push(t);return n}function fn(i){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(i))return;let e=Number(i);if(!Number.isNaN(e))return e;let t=i.toLowerCase();return t==="true"||t!=="false"&&i.trim()}const dn=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Rr=new RegExp(`(<|\\/)(${dn.join("|")})`,"g");var Ar=Object.freeze({__proto__:null,default:br,Exifr:ce,fileParsers:J,segmentParsers:N,fileReaders:Q,tagKeys:_,tagValues:q,tagRevivers:oe,createDictionary:F,extendDictionary:me,fetchUrlAsArrayBuffer:pe,readBlobAsArrayBuffer:ge,chunkedProps:ne,otherSegments:Re,segments:ye,tiffBlocks:M,segmentsAndBlocks:se,tiffExtractables:re,inheritables:Ae,allFormatters:ae,Options:Se,parse:st,gpsOnlyOptions:zt,gps:sn,thumbnailOnlyOptions:$t,thumbnail:rn,thumbnailUrl:an,orientationOnlyOptions:Wt,orientation:Kt,rotations:Xt,get rotateCanvas(){return he},get rotateCss(){return fe},rotation:on});let Ei=Ye("fs",i=>i.promises);Q.set("fs",class extends at{async readWhole(){this.chunked=!1,this.fs=await Ei;let i=await this.fs.readFile(this.input);this._swapBuffer(i)}async readChunked(){this.chunked=!0,this.fs=await Ei,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(i,e){this.fh===void 0&&await this.open(),i+e>this.size&&(e=this.size-i);var t=this.subarray(i,e,!0);return await this.fh.read(t.dataView,0,e,i),t}async close(){if(this.fh){let i=this.fh;this.fh=void 0,await i.close()}}});Q.set("base64",class extends at{constructor(...i){super(...i),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(i,e){let t,n,s=this.input;i===void 0?(i=0,t=0,n=0):(t=4*Math.floor(i/3),n=i-t/4*3),e===void 0&&(e=this.size);let r=i+e,a=t+4*Math.ceil(r/3);s=s.slice(t,a);let o=Math.min(e,this.size-i);if(nt){let l=it.from(s,"base64").slice(n,n+o);return this.set(l,i,!0)}{let l=this.subarray(i,o,!0),u=atob(s),f=l.toUint8();for(let c=0;c<o;c++)f[c]=u.charCodeAt(n+c);return l}}});class Mi extends rt{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:n,iptc:s,icc:r}=e;n.enabled&&t.deps.add(700),s.enabled&&t.deps.add(33723),r.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:n,icc:s}=this.options;if(e.enabled||t.enabled||n.enabled||s.enabled){let r=Math.max(Et(this.options),this.options.chunkSize);await this.file.ensureChunk(0,r),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}b(Mi,"type","tiff"),J.set("tiff",Mi);let Tr=Ye("zlib");const Or=["ihdr","iccp","text","itxt","exif"];class Li extends rt{constructor(...e){super(...e),b(this,"catchError",t=>this.errors.push(t)),b(this,"metaChunks",[]),b(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:n}=this;for(;e<t;){let s=n.getUint32(e),r=n.getUint32(e+4),a=n.getString(e+4,4).toLowerCase(),o=s+4+4+4,l={type:a,offset:e,length:o,start:e+4+4,size:s,marker:r};Or.includes(a)?this.metaChunks.push(l):this.unknownChunks.push(l),e+=o}}parseTextChunks(){let e=this.metaChunks.filter(t=>t.type==="text");for(let t of e){let[n,s]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(n,s)}}injectKeyValToIhdr(e,t){let n=this.parsers.ihdr;n&&n.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find(t=>t.type==="ihdr");e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find(t=>t.type==="exif");e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter(t=>t.type==="itxt");for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find(o=>o.type==="iccp");if(!e)return;let{chunk:t}=e,n=t.getUint8Array(0,81),s=0;for(;s<80&&n[s]!==0;)s++;let r=s+2,a=t.getString(0,s);if(this.injectKeyValToIhdr("ProfileName",a),qe){let o=await Tr,l=t.getUint8Array(r);l=o.inflateSync(l),this.injectSegment("icc",l)}}}b(Li,"type","png"),J.set("png",Li),F(_,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),me(_,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Fi=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];me(_,"ifd0",Fi),me(_,"exif",Fi),F(q,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class It extends K{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}b(It,"type","jfif"),b(It,"headerLength",9),N.set("jfif",It),F(_,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Ui extends K{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}b(Ui,"type","ihdr"),N.set("ihdr",Ui),F(_,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),F(q,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Xe extends K{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let n=super.findPosition(e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return function(t){let n=function(s){let r=s[0].constructor,a=0;for(let u of s)a+=u.length;let o=new r(a),l=0;for(let u of s)o.set(u,l),l+=u.length;return o}(t.map(s=>s.chunk.toUint8()));return new W(n)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&B("ICC header is too short");for(let[t,n]of Object.entries(Dr)){t=parseInt(t,10);let s=n(this.chunk,t);s!=="\0\0\0\0"&&e.set(t,s)}}parseTags(){let e,t,n,s,r,{raw:a}=this,o=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;o--;){if(e=this.chunk.getString(l,4),t=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),s=this.chunk.getString(t,4),t+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");r=this.parseTag(s,t,n),r!==void 0&&r!=="\0\0\0\0"&&a.set(e,r),l+=12}}parseTag(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n>this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return ue(this.chunk.getString(e+12,t))}parseText(e,t){return ue(this.chunk.getString(e+8,t-8))}parseSig(e){return ue(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,n=t.getUint32(e+8),s=t.getUint32(e+12),r=e+16,a=[];for(let o=0;o<n;o++){let l=t.getString(r+0,2),u=t.getString(r+2,2),f=t.getUint32(r+4),c=t.getUint32(r+8)+e,h=ue(t.getUnicodeString(c,f));a.push({lang:l,country:u,text:h}),r+=s}return n===1?a[0].text:a}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}b(Xe,"type","icc"),b(Xe,"multiSegment",!0),b(Xe,"headerLength",18);const Dr={4:ee,8:function(i,e){return[i.getUint8(e),i.getUint8(e+1)>>4,i.getUint8(e+1)%16].map(t=>t.toString(10)).join(".")},12:ee,16:ee,20:ee,24:function(i,e){const t=i.getUint16(e),n=i.getUint16(e+2)-1,s=i.getUint16(e+4),r=i.getUint16(e+6),a=i.getUint16(e+8),o=i.getUint16(e+10);return new Date(Date.UTC(t,n,s,r,a,o))},36:ee,40:ee,48:ee,52:ee,64:(i,e)=>i.getUint32(e),80:ee};function ee(i,e){return ue(i.getString(e,4))}N.set("icc",Xe),F(_,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const ze={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ni={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};F(q,"icc",[[4,ze],[12,Ni],[40,Object.assign({},ze,Ni)],[48,ze],[80,ze],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class $e extends K{static canHandle(e,t,n){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,n)!==void 0}static headerLength(e,t,n){let s,r=this.containsIptc8bim(e,t,n);if(r!==void 0)return s=e.getUint8(t+r+7),s%2!=0&&(s+=1),s===0&&(s=4),r+8+s}static containsIptc8bim(e,t,n){for(let s=0;s<n;s++)if(this.isIptcSegmentHead(e,t+s))return s}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,n=!1;for(let s=0;s<t;s++)if(this.chunk.getUint8(s)===28&&this.chunk.getUint8(s+1)===2){n=!0;let r=this.chunk.getUint16(s+3),a=this.chunk.getUint8(s+2),o=this.chunk.getLatin1String(s+5,r);e.set(a,this.pluralizeValue(e.get(a),o)),s+=4+r}else if(n)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}b($e,"type","iptc"),b($e,"translateValues",!1),b($e,"reviveValues",!1),N.set("iptc",$e),F(_,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),F(q,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);async function xr(i){const e=await Ar.orientation(i),t=await i.arrayBuffer(),n=URL.createObjectURL(new Blob([t])),s=await new Promise((u,f)=>{const c=new Image;c.onload=()=>u(c),c.onerror=h=>f(h),c.src=n}),r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return i;let o=s.naturalWidth,l=s.naturalHeight;switch(r.width=o,r.height=l,a.save(),e){case 2:a.translate(o,0),a.scale(-1,1);break;case 3:a.translate(o,l),a.rotate(Math.PI);break;case 4:a.translate(0,l),a.scale(1,-1);break;case 5:r.width=l,r.height=o,a.translate(l,0),a.rotate(Math.PI/2),a.scale(1,-1),o=r.width,l=r.height;break;case 6:r.width=l,r.height=o,a.translate(l,0),a.rotate(Math.PI/2),o=r.width,l=r.height;break;case 7:r.width=l,r.height=o,a.translate(l,o),a.rotate(Math.PI/2),a.scale(1,-1),o=r.width,l=r.height;break;case 8:r.width=l,r.height=o,a.translate(0,o),a.rotate(-Math.PI/2),o=r.width,l=r.height;break}if(a.drawImage(s,0,0),a.restore(),URL.revokeObjectURL(n),r.width>r.height){const u=document.createElement("canvas"),f=u.getContext("2d");return f?(u.width=r.height,u.height=r.width,f.translate(u.width/2,u.height/2),f.rotate(-Math.PI/2),f.drawImage(r,-r.width/2,-r.height/2),new Promise(c=>{u.toBlob(h=>c(h||i),"image/jpeg",.8)})):new Promise(c=>{r.toBlob(h=>c(h||i),"image/jpeg",.8)})}return new Promise(u=>{r.toBlob(f=>u(f||i),"image/jpeg",.8)})}const Er=le({name:"TakePictureView",setup(){const i=x(!0),e=x(null),t=x([]),n=x(!1),s=x(""),r=x(null),a=x(null),o=x(null);Nt(()=>{i.value&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}}).then(c=>{a.value=c,r.value&&(r.value.srcObject=c,r.value.play(),r.value.addEventListener("loadedmetadata",()=>{var h,p;console.log(`[TakePictureView] Video resolution: ${(h=r.value)==null?void 0:h.videoWidth}x${(p=r.value)==null?void 0:p.videoHeight}`)}))}).catch(c=>{console.error("[TakePictureView] Error accessing camera:",c),s.value="Erro ao acessar a câmera."})}),kn(()=>{a.value&&(a.value.getTracks().forEach(c=>c.stop()),a.value=null,console.log("[TakePictureView] Video stream stopped"))});const l=()=>{if(!r.value)return;const c=document.createElement("canvas");c.width=r.value.videoWidth,c.height=r.value.videoHeight;const h=c.getContext("2d");h&&(h.drawImage(r.value,0,0,c.width,c.height),c.toBlob(async p=>{if(!p)return;const w=await xr(p),P=URL.createObjectURL(w);e.value=P,a.value&&(a.value.getTracks().forEach(C=>C.stop()),a.value=null,console.log("[TakePictureView] Video stream stopped")),i.value=!1,n.value=!0;const S=new FormData,m=new File([w],"capture.jpg",{type:"image/jpeg"});S.append("file",m);try{const I=await(await fetch("https://172.27.2.39/api/predict?segmentation=false",{method:"POST",body:S})).json();t.value=I.detections||[]}catch(C){console.error("[TakePictureView] Detection error:",C),s.value="Falha na detecção."}finally{n.value=!1}},"image/jpeg",.8))},u=()=>{e.value=null,t.value=[],s.value="",i.value=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}}).then(c=>{a.value=c,r.value&&(r.value.srcObject=c,r.value.play())}).catch(c=>{console.error("[TakePictureView] Error accessing camera:",c),s.value="Erro ao acessar a câmera."})},f=()=>{if(!e.value||t.value.length===0)return;const c=o.value;if(!c)return;const h=c.getContext("2d");if(!h)return;const p=new Image;p.src=e.value,p.onload=()=>{const P=p.width,S=p.height;c.width=P+50*2,c.height=S+50*2,h.fillStyle="black",h.fillRect(0,0,c.width,c.height),h.drawImage(p,50,50,P,S),t.value.forEach(m=>{const[C,I,V,E]=m.bbox;h.strokeStyle="#FF8C00",h.lineWidth=2,h.strokeRect(C+50,I+50,V-C,E-I),h.font="16px Arial",h.fillStyle="#FF8C00",h.fillText(`Conf: ${m.score.toFixed(2)}`,C+50,I+50-5)})}};return Bt(()=>t.value,()=>{i.value||f()}),{isCameraActive:i,capturedPhoto:e,detections:t,loading:n,error:s,videoRef:r,streamRef:a,canvasRef:o,capturePhoto:l,retakePhoto:u}}}),Mr={class:"take-picture-container"},Lr={key:0},Fr={ref:"videoRef",class:"camera-video",playsinline:"",style:{width:"100%",maxWidth:"600px",maxHeight:"70vh",borderRadius:"16px",objectFit:"cover"}},Ur={key:1},Nr={key:0,ref:"canvasRef",class:"camera-canvas",style:{maxWidth:"100%",maxHeight:"70vh",borderRadius:"16px",objectFit:"cover"}},Br=["src"],Vr={style:{"margin-top":"16px"}},Gr={key:2,style:{"margin-top":"16px"}},_r={key:3,style:{color:"red","margin-top":"16px"}};function jr(i,e,t,n,s,r){return T(),O("div",Mr,[i.isCameraActive?(T(),O("div",Lr,[L("video",Fr,null,512)])):(T(),O("div",Ur,[i.capturedPhoto&&i.detections.length>0?(T(),O("canvas",Nr,null,512)):i.capturedPhoto?(T(),O("img",{key:1,src:i.capturedPhoto,alt:"Imagem capturada",style:{width:"100%",maxWidth:"600px",maxHeight:"70vh",borderRadius:"16px",objectFit:"cover"}},null,8,Br)):de("",!0)])),L("div",Vr,[i.isCameraActive?(T(),O("button",{key:0,onClick:e[0]||(e[0]=(...a)=>i.capturePhoto&&i.capturePhoto(...a)),class:"capture-button"}," Capturar Foto ")):(T(),O("button",{key:1,onClick:e[1]||(e[1]=(...a)=>i.retakePhoto&&i.retakePhoto(...a)),class:"retake-button"}," Tirar Outra Foto "))]),i.loading?(T(),O("div",Gr,e[2]||(e[2]=[L("div",{class:"loading-spinner"},null,-1),L("p",null,"Processando detecção...",-1)]))):de("",!0),i.error?(T(),O("p",_r,we(i.error),1)):de("",!0)])}const Hr=Ie(Er,[["render",jr],["__scopeId","data-v-9578ba68"]]),zr=le({name:"HistoryView",setup(){const i=x(null),e=x([]),t=x(""),n=async()=>{try{const o=await fetch("https://172.27.2.39/api/history/latest",{cache:"no-store"});if(!o.ok)throw new Error(`Falha ao buscar última detecção. Status: ${o.status}`);const l=await o.blob();if(l.size===0)i.value=null;else{const u=URL.createObjectURL(l);i.value=u}}catch(o){console.error("Erro ao buscar última detecção:",o),t.value="Não foi possível obter a última detecção."}},s=async()=>{try{const o=await fetch("https://172.27.2.39/api/history/getHistory");if(!o.ok)throw new Error(`Falha ao buscar histórico. Status: ${o.status}`);const l=await o.json();if(!l||!Array.isArray(l.history)){e.value=[];return}e.value=l.history}catch(o){console.error("Erro ao buscar histórico:",o),t.value="Não foi possível obter o histórico de detecções.",e.value=[]}};let r=null;const a=()=>{n(),s()};return Nt(()=>{a(),r=window.setInterval(a,3e3)}),Vi(()=>{r&&clearInterval(r)}),{latestImage:i,historyList:e,error:t}}}),$r={class:"history-container"},Wr={key:0,style:{color:"red"}},Kr={key:1},Xr=["src"],qr={key:2},Yr={key:3,class:"history-grid"},Jr=["src","alt"],Qr={key:4};function Zr(i,e,t,n,s,r){return T(),O("div",$r,[i.error?(T(),O("p",Wr,we(i.error),1)):de("",!0),e[2]||(e[2]=L("h2",null,"Última Detecção",-1)),i.latestImage?(T(),O("div",Kr,[L("img",{src:i.latestImage,alt:"Última detecção",style:{width:"100%","max-width":"600px",display:"block",margin:"0 auto","border-radius":"8px","box-shadow":"0 4px 10px rgba(0,0,0,0.5)"}},null,8,Xr)])):(T(),O("div",qr,e[0]||(e[0]=[L("p",null,"Sem detecções recentes.",-1)]))),e[3]||(e[3]=L("h3",null,"Detection History",-1)),i.historyList.length>0?(T(),O("div",Yr,[(T(!0),O(Rt,null,At(i.historyList,(a,o)=>(T(),O("div",{class:"history-item",key:o},[L("img",{src:"data:image/jpeg;base64,"+a,alt:"Detecção "+(o+1),class:"history-img"},null,8,Jr)]))),128))])):(T(),O("div",Qr,e[1]||(e[1]=[L("p",null,"Nenhuma detecção no histórico.",-1)])))])}const ea=Ie(zr,[["render",Zr],["__scopeId","data-v-4d7aa012"]]),ta=[{path:"/prediction",name:"Prediction",component:rr},{path:"/takePicture",name:"TakePicture",component:Hr},{path:"/history",name:"History",component:ea},{path:"/:pathMatch(.*)*",redirect:"/prediction"}],ia=Ks({history:ws("/astenvuesion"),routes:ta});/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const na=Symbol();var Bi;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(Bi||(Bi={}));function sa(){const i=In(!0),e=i.run(()=>x({}));let t=[],n=[];const s=Rn({install(r){s._a=r,r.provide(na,s),r.config.globalProperties.$pinia=s,n.forEach(a=>t.push(a)),n=[]},use(r){return this._a?t.push(r):n.push(r),this},_p:t,_a:null,_e:i,_s:new Map,state:e});return s}const qt=An($n);qt.use(sa());qt.use(ia);qt.mount("#app");
